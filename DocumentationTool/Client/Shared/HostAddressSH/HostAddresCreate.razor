@inject NavigationManager navigationManager
@inject IServerRepository serverRepository
@inject IRouterRepository routerRepository
@inject ISwitchRepository switchRepository
@inject IClientRepository clientRepository  


<HostAddressForm HostAddress="HostAddress"
                 Device="@Device"
                 />
                 

@code {
    [Parameter] public string Device { get; set; }
    [Parameter] public int DeviceId { get; set; }

    public List<LayerThreeNet> LayerThreeNets { get; set; }
    public List<IPList> iPLists { get; set; }

    public HostAddress HostAddress = new HostAddress();
    private ServerDevice ServerDevice;

    //protected override async Task OnInitializedAsync()
    //{
    //    try
    //    {
    //        await LoadData();
    //    }
    //    catch (Exception ex)
    //    {

    //    }
    //}

    //private async Task LoadData()
    //{
    //    LayerThreeNets = await networkRepository.GetAllLayerThreeNet();
    //    iPLists = await iplistRepository.GetAllIPlists();
    //}

    private async Task SaveData()
    {
        try
        {
            switch (Device)
            {
                case "server":
                    ServerDevice = await serverRepository.GetServerDevice(DeviceId);
                    ServerDevice.HostAddress = HostAddress;
                    await serverRepository.UpdateServerDevice(ServerDevice);
                    break;

                case "switch":

                    break;

                case "router":

                    break;

                case "printer":
                    break;

                case "client":
                    break;

                default:
                    throw new ArgumentException(message: "invalid device value", paramName: nameof(Device));
            };

            var url = $"{Device}/detail/{DeviceId}";
            navigationManager.NavigateTo(url);
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex);
        }
    }
}
